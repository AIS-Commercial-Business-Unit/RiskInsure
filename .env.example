# ==============================================================================
# RiskInsure Environment Variables for Docker Compose
# ==============================================================================
# Copy this file to .env and uncomment/fill in values for your setup.
# The .env file is git-ignored and will not be checked in.
#
# Two common setups:
#   1. Local emulators (default) - Cosmos DB emulator + RabbitMQ in Docker
#   2. Azure cloud resources     - Real Cosmos DB + Azure Service Bus
#
# Instructions: Uncomment ONE option per section below.
# ==============================================================================

# ---- Message Broker ---------------------------------------------------------
# Controls which transport NServiceBus uses for all domain services.
#   RabbitMQ         - Local development (runs in Docker via docker-compose)
#   AzureServiceBus  - Azure Service Bus
MESSAGE_BROKER=RabbitMQ

# ---- Messaging Connection String --------------------------------------------
# The connection string for the chosen MESSAGE_BROKER above.
# This single value is used by all domain services AND ServiceControl.
#
# RabbitMQ:         host=rabbitmq;username=guest;password=guest
# AzureServiceBus:  Endpoint=sb://YOUR-NAMESPACE.servicebus.windows.net/;SharedAccessKeyName=...;SharedAccessKey=...
#
# NOTE: Do NOT use the Azure Service Bus emulator connection string here.
#       The emulator does not support all features required by NServiceBus (e.g. auto-subscribe).
MESSAGING_CONNECTION_STRING=host=rabbitmq;username=guest;password=guest

# ---- ServiceControl Transport Type ------------------------------------------
# Particular's ServiceControl uses different transport identifiers than NServiceBus.
# This MUST match the MESSAGE_BROKER choice above.
# See: https://docs.particular.net/servicecontrol/transports
#
#   MESSAGE_BROKER=RabbitMQ        → RabbitMQ.ClassicConventionalRouting
#   MESSAGE_BROKER=AzureServiceBus → NetStandardAzureServiceBus
SERVICECONTROL_TRANSPORTTYPE=RabbitMQ.ClassicConventionalRouting

# ---- Cosmos DB --------------------------------------------------------------
# Option A: Local emulator (runs in Docker via docker-compose)
#   Well-known emulator key, safe for local dev only.
#   Explorer UI: https://localhost:8081/_explorer/index.html
COSMOSDB_CONNECTION_STRING=AccountEndpoint=https://cosmos.domain:8081/;AccountKey=C2y6yDjf5/R+ob0N8A7Cgv30VRDJIWEHLM+4QDU5DE2nQ9nDuVTqobD4b8mGGyPMbIZnqyMsEcaGQy67XIw/Jw==

# Option B: Azure Cosmos DB (replace with your real connection string)
#COSMOSDB_CONNECTION_STRING=AccountEndpoint=https://YOUR-COSMOS-ACCOUNT.documents.azure.com:443/;AccountKey=YOUR_COSMOS_KEY_HERE;

# ---- Application Insights (optional) ----------------------------------------
# When set, all services send telemetry (traces, metrics, logs) to Azure
# Application Insights. Leave blank or comment out to disable — services
# will start normally without it.
#APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=00000000-0000-0000-0000-000000000000;IngestionEndpoint=https://eastus2-x.in.applicationinsights.azure.com/;...

# ---- SQL Server (if needed) ------------------------------------------------
SQL_SERVER_SA_PASSWORD=SomeStrongPassword!123

# ---- Particular Software License --------------------------------------------
# Single-line XML license for NServiceBus / ServicePlatform.
# Obtain from https://particular.net/license or your license administrator.
#PARTICULARSOFTWARE_LICENSE=<?xml version="1.0" encoding="utf-8"?><license ...>...</license>

# ==============================================================================
# Quick-switch cheat sheet:
#
#   RabbitMQ (local dev):
#     MESSAGE_BROKER=RabbitMQ
#     MESSAGING_CONNECTION_STRING=host=rabbitmq;username=guest;password=guest
#     SERVICECONTROL_TRANSPORTTYPE=RabbitMQ.ClassicConventionalRouting
#
#   Azure Service Bus:
#     MESSAGE_BROKER=AzureServiceBus
#     MESSAGING_CONNECTION_STRING=Endpoint=sb://YOUR-NAMESPACE.servicebus.windows.net/;SharedAccessKeyName=...;SharedAccessKey=...
#     SERVICECONTROL_TRANSPORTTYPE=NetStandardAzureServiceBus
#
# Notes:
#   - Connection strings use Docker service names (rabbitmq, cosmos.domain)
#     which resolve inside the Docker network. From your host machine use
#     "localhost" instead.
#   - Host-accessible Cosmos emulator connection string:
#     AccountEndpoint=https://localhost:8081/;AccountKey=C2y6yDjf5/R+ob0N8A7Cgv30VRDJIWEHLM+4QDU5DE2nQ9nDuVTqobD4b8mGGyPMbIZnqyMsEcaGQy67XIw/Jw==
# ==============================================================================
